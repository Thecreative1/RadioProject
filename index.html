<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Webamp + MilkDrop - Estilo Retro</title>
  <script src="https://unpkg.com/webamp"></script>
  <script src="https://unpkg.com/butterchurn"></script>
  <script src="https://unpkg.com/butterchurn-presets"></script>
  <script src="https://unpkg.com/webamp-butterchurn"></script>
  <style>
    body {
      background-color: #000;
      margin: 0;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    #container {
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    #winamp {
      width: 275px;
      height: auto;
    }
    #visualizer {
      width: 640px;
      height: 480px;
      border: 2px solid #333;
      background-color: black;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="winamp"></div>
    <canvas id="visualizer" width="640" height="480"></canvas>
  </div>

  <script>
    const visualizerCanvas = document.getElementById("visualizer");
    let visualizer;

    const webamp = new Webamp({
      initialTracks: [
        {
          metaData: { artist: "RFM", title: "RFM ao Vivo" },
          url: "https://21223.live.streamtheworld.com/RFMAAC.aac",
          duration: 0
        }
      ],
      initialSkin: {
        url: "https://cdn.jsdelivr.net/npm/@webamp/skins@1.2.0/skins/Milkyway.wsz"
      },
      enableButterchurn: true,
      __butterchurnOptions: {
        importButterchurn: () => Promise.resolve(window.butterchurn),
        getPresets: () => window.butterchurnPresets.getPresets(),
        butterchurnOpen: true,
        getVisualizerCanvas: () => visualizerCanvas
      },
      filePickers: []
    });

    webamp.renderWhenReady(document.getElementById("winamp"));
  </script>
</body>
</html>
