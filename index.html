<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Rádios Portuguesas - Webamp Retro</title>
  <script src="https://unpkg.com/webamp"></script>
  <script src="https://unpkg.com/butterchurn"></script>
  <script src="https://unpkg.com/butterchurn-presets"></script>
  <script src="https://unpkg.com/webamp-butterchurn"></script>
  <style>
    body {
      background-color: black;
      margin: 0;
      overflow: hidden;
    }
    #winamp-container {
      position: absolute;
      top: 60px;
      left: 20px;
      z-index: 10;
    }
    #radio-selector {
      position: absolute;
      top: 10px;
      left: 20px;
      z-index: 20;
      font-size: 16px;
      padding: 5px;
    }
  </style>
</head>
<body>
  <select id="radio-selector">
    <option value="0">Antena 1</option>
    <option value="1">Rádio Comercial</option>
    <option value="2">Rádio Nova Era</option>
  </select>

  <div id="winamp-container"></div>

  <script>
    const radioStations = [
      {
        name: "Antena 1",
        url: "http://antena1-live.rtp.pt/antena180a.mp3"
      },
      {
        name: "Rádio Comercial",
        url: "https://mcrscast.mcr.iol.pt/comercial.mp3"
      },
      {
        name: "Rádio Nova Era",
        url: "http://centova.radionovaera.pt:9470/stream"
      }
    ];

    const trackList = radioStations.map(station => ({
      metaData: { title: station.name },
      url: station.url,
      duration: 0
    }));

    const webamp = new Webamp({
      initialTracks: trackList,
      initialSkin: {
        url: "https://cdn.jsdelivr.net/npm/webamp@1.5.0/skins/Milkyway.wsz"
      },
      enableButterchurn: true,
      __butterchurnOptions: {
        importButterchurn: () => Promise.resolve(window.butterchurn),
        getPresets: () => window.butterchurnPresets.getPresets(),
        butterchurnOpen: true
      },
      filePickers: []
    });

    webamp.renderWhenReady(document.getElementById("winamp-container")).then(() => {
      const selector = document.getElementById("radio-selector");
      selector.addEventListener("change", () => {
        const index = parseInt(selector.value);
        webamp.setTracks([trackList[index]]);
        webamp.playTrack(trackList[index]);
      });
    });
  </script>
</body>
</html>
